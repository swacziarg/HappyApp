# ðŸ§  Garmin â†’ Mood App â€” Build Checklist

> Goal: Build a web-first MVP that estimates daily mood from Garmin data, tested phase by phase with minimal pain.

---

## ðŸ”¹ Phase 0 â€” Project Groundwork (Foundation)

**Goal:** Make future changes cheap and reversible.

- [X] Create Git repository
- [X] Set repo structure:
    backend/
    frontend/
    scripts/
- [X] Initialize Python virtual environment
- [X] Install FastAPI
- [X] Add `.env.example`
- [X] Backend runs locally (`uvicorn`)
- [X] Frontend builds (placeholder OK)

**Gate**
- [X] Repo can be cloned and run from scratch
- [X] Backend + frontend both start without errors

---

## ðŸ”¹ Phase 1 â€” Database (Data Spine)

**Goal:** Lock down schema early.

- [X] Choose Postgres provider (Supabase)
- [X] Create database
- [X] Create tables:
- [X] `users`
- [X] `sleep_summary`
- [X] `daily_physiology`
- [X] `mood_labels`
- [X] `predictions`
- [X] Add indexes on `(user_id, date)`
- [X] Write sanity SQL queries

**Gate**
- [X] Can insert fake daily data
- [X] Can query by date range
- [X] No assumptions about single-user baked in

---

## ðŸ”¹ Phase 2 â€” Manual Data Ingest (Real Data First)

**Goal:** Work with real Garmin data before APIs.

- [X] Export Garmin sleep data (CSV / JSON)
- [X] Export HR / HRV / stress data
- [X] Write import script
- [X] Normalize dates
- [X] Normalize units
- [X] Handle missing values
- [X] Map fields â†’ DB schema
- [X] Import 7â€“14 days of data
- [X] Ensure idempotent imports

**Gate**
- [X] DB reflects real historical data
- [X] Re-import does not duplicate rows
- [X] Missing values donâ€™t crash scripts

---

## ðŸ”¹ Phase 3 â€” Feature Extraction

**Goal:** Convert raw metrics into interpretable signals.

- [X] Create daily feature extraction script
- [X] Compute:
- [X] HRV deviation vs rolling baseline
- [X] Sleep debt vs baseline
- [X] Resting HR delta
- [X] Stress percentile
- [X] Activity over/under baseline
- [X] Store daily feature vectors
- [X] Log intermediate values for debugging

**Gate**
- [~] Each day outputs a clean feature vector
- [X] Baselines update correctly
- [X] Feature values look reasonable to a human

---

## ðŸ”¹ Phase 4 â€” Mood Inference Engine (Rules-Based)

**Goal:** Produce explainable mood estimates.

- [X] Define mood scale (1â€“5)
- [X] Write scoring rules
- [X] Apply penalties/boosts
- [X] Generate explanation text
- [X] Output confidence level

**Gate**
- [X] Can explain why any day is high or low
- [X] No NaNs or silent failures
- [X] Single-feature changes affect output predictably

---

## ðŸ”¹ Phase 5 â€” API Layer

**Goal:** Decouple backend logic from UI.

- [ ] Create FastAPI app
- [ ] Add endpoints:
- [ ] `GET /today`
- [ ] `GET /history`
- [ ] `POST /mood`
- [ ] Validate request/response schemas
- [ ] Handle missing data gracefully

**Gate**
- [ ] Endpoints work via curl/Postman
- [ ] Frontend could exist without DB knowledge
- [ ] Errors return useful messages

---

## ðŸ”¹ Phase 6 â€” Web UI

**Goal:** Close the feedback loop.

- [ ] Create Today view
- [ ] Display predicted mood + explanation
- [ ] Build 1-tap mood check-in
- [ ] Persist mood labels
- [ ] Create history view
- [ ] Mobile-friendly layout

**Gate**
- [ ] App usable daily without touching code
- [ ] Mood check-ins persist correctly
- [ ] Predicted vs actual mood visible

---

## ðŸ”¹ Phase 7 â€” Automation

**Goal:** System runs hands-off.

- [ ] Add daily scheduled job
- [ ] Job runs:
- [ ] Data ingest
- [ ] Feature extraction
- [ ] Mood prediction
- [ ] Ensure idempotency
- [ ] Log failures clearly

**Gate**
- [ ] New days appear automatically
- [ ] Missed days recover cleanly
- [ ] Re-running job doesnâ€™t corrupt data

---

## ðŸ”¹ Phase 8 â€” Garmin Health API (Optional)

**Goal:** Replace manual ingest cleanly.

- [ ] Apply for Garmin Health API
- [ ] Implement webhook endpoint
- [ ] Map API payloads â†’ existing schema
- [ ] Compare API vs manual imports
- [ ] Disable manual ingest

**Gate**
- [ ] Outputs match manual pipeline
- [ ] No schema changes required
- [ ] Manual import can be removed

---

## ðŸ”¹ Phase 9 â€” Multi-User + Consent (Only If Needed)

**Goal:** Prepare for external users safely.

- [ ] Add authentication provider
- [ ] Add consent flow
- [ ] Tie Garmin OAuth â†’ user_id
- [ ] Enforce row-level security
- [ ] Add privacy policy

**Gate**
- [ ] Users cannot see each otherâ€™s data
- [ ] Revoking consent stops ingestion
- [ ] System still works for original user

---

## ðŸ§  Weekly Reality Check

- [ ] Am I testing one thing at a time?
- [ ] Can I explain every number shown?
- [ ] Am I optimizing for insight, not accuracy?
- [ ] Is everything reversible?

---

> Rule: **Never advance a phase until its gate is fully checked.**
